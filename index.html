<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
  <!-- <meta name="viewport" content="initial-scale=0.7, user-scalable=no"> -->
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <title>BikeLapse - Open Source and fun way to visually catalog bike rides</title>

  <!-- FAVICON -->
  <link rel='icon' href='img/favicon.ico' type='image/x-icon'/>

<!-- META META META META META META META META META META META META META META META META META META META  -->
<!-- META META META META META META META META META META META META META META META META META META META  -->
<!-- META META META META META META META META META META META META META META META META META META META  -->    

  <meta name="description" content="Open source website template for visually cataloging bike rides">
  <meta name="keywords" content="open source, opensource, bikelapse, bike ride, timelapse, JavaScript, arduino, adafruit">
  <meta name="author" content="Turner Kirk">
  
  <meta property="og:site_name" content="BikeLapse"/>
  <meta property="og:title" content="BikeLapse"/>
  <meta property="og:image" content="https://bikelapse.com/img/social.png" />
  <meta property="og:url" content="https://BikeLapse.com"/>
  <meta property="og:type" content="website"/>
  <meta property="og:description" content="Create a virtual catalog of your bike rides! FREE and Open Source so you can set up your own catalog without worrying about who has access to your data!"/>
  <meta itemprop="name" content="BikeLapse"/>
  <meta itemprop="image" content="https://bikelapse.com/img/social.png" />
  <meta itemprop="url" content="https://BikeLapse.com"/>
  <meta itemprop="description" content="Create a virtual catalog of your bike rides! FREE and Open Source so you can set up your own catalog without worrying about who has access to your data!"/>
  <meta name="twitter:title" content="BikeLapse"/>
  <meta name="twitter:image" content="https://bikelapse.com/img/social.png" />
  <meta name="twitter:url" content="https://BikeLapse.com"/>
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:description" content="Create a virtual catalog of your bike rides! FREE and Open Source so you can set up your own catalog without worrying about who has access to your data!"/>
  <meta name="description" content="Create a virtual catalog of your bike rides! FREE and Open Source so you can set up your own catalog without worrying about who has access to your data!"/>


<!-- CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS -->
<!-- CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS -->
<!-- CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS -->    

  <!-- Bootstrap 4 CSS - Stable 4.5 compiled and minified -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" 
  integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" 
  crossorigin="anonymous">

  <!-- Date Range Picker -- UNUSED -->
  <!-- <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" /> -->

  <!-- Leaflet CSS & JS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
  integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
  crossorigin=""/>
  
  <script type="text/javascript" src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
  integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
  crossorigin=""></script>

  <!-- Leaflet "topcenter" Add-on for positioning controls  -->
  <link rel="stylesheet" type="text/css" href="css/lib/leaflet-control-topcenter.css">
  <script type="text/javascript" src="js/lib/leaflet-control-topcenter.js"></script>

  <!-- Stamen Map Tiles -  -->
  <!-- Leaflet Map TileSets from Stamen.com -- Doesn't have secure SSL Certificate so don't use this -->
  <!-- <script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.3.0"></script> -->

  <!-- LEAFLET ELEVATION PLUGIN CSS -->
  <link rel="stylesheet" type="text/css" href="css/lib/leaflet.elevation-0.0.4.css" />

  <!-- Our CSS -->
  <link rel="stylesheet" type="text/css" href="css/style.css">

<!-- CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS -->
<!-- CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS -->
<!-- CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS CSS -->  

  
  <!-- Styling specific to full page maps -->
  <style>

    /* remove default margin and padding from body */
    body {
      padding: 0;
      padding-top: 40pt;
      /* margin-top: 40pt; */
      margin: 0;
    }
    

    /* set map, body, and html to 100% of the screen size */
    #map, body, html {
        height: 100%;
    }

    .leaflet-control-layers-list {
      display: block;
      font-style: normal;
      font-variant-ligatures: normal;
      font-variant-caps: normal;
      font-variant-numeric: normal;
      font-variant-east-asian: normal;
      font-weight: normal;
      font-stretch: normal;
      font-size: 1.0em;
      line-height: 0.0;
      font-family: "Helvetica Neue", Arial, Helvetica, sans-serif;
      padding: 6px 10px 0px 6px;
    }

    /* Specific styling for the bullets (which we will use the marker sprites to fill) */
    /* .legend i {
      width: 20px;
      height: 20px;
      line-height: 200px;
      float: left;
      margin-right: 0px;
      margin-top: 0px;
      opacity: 1;
    }

    .legend {
      line-height: 20px;
    } */

    /* .info.legend.leaflet-control {
      font: 12px/14px Arial, Helvetica, sans-serif;
    }

    .leaflet-control-layers-list{
      font: 8px/10px Arial, Helvetica, sans-serif;
    } */

    /* if we try to use the "viewport" meta tag to make this page responsive, it doesn't work well */
    /* so we need to manually make the navbar taller on mobile or smaller screen devices */
    /* this media query acts only if the screen is greater than 320px and less than 812px */
    /* @media screen and (max-width: 800px)  */
    @media only screen 
    and (min-device-width : 320px) 
    and (max-device-width : 800px)
    {

      /* this needs to be 70pt to work for some reason */
      body {
        padding-top: 70pt;
      }

      .navbar {
        min-height: 80px;
      }

      .navbar-brand {
        /* padding right/left 15px */
        /* padding: 5px 30px;  */
        padding-top: 5px;
        padding-right: 30px;
        padding-bottom: 0px;
        padding-left: 30px;        
        height: 80px;
        line-height: 80px;
        font-size: 2.5rem;
      }

      .navbar-toggler-icon{
        
        width: 3em;
        height: 3em;

      }

      .navbar-toggler {
        /* (80px - button height 34px) / 2 = 23px */
        margin-top: 5px;
        padding-top: 5px
        /* padding: 9px 10px !important; */
      }

      .navbar-nav > li > a {
        /* (80px - line-height of 27px) / 2 = 26.5px */
        padding-top: 26.5px;
        padding-bottom: 26.5px;
        line-height: 27px;
        font-size: 2rem;
      }

      .nav-link{
        margin-left: 30px;
      }
    }

    #player-parent, 
    #elevation-display-div,
    #layer-control-display-div,
    #ride-info-parent{
      background: rgba(255,255,255,0.8);
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
    }

    #ride-info-parent{
      max-width: 500px;
      border-radius: 5px;
    }

    #collapse-button-video{
      background-color: rgba(255,255,255,0.8);
      color: rgb(58, 109, 151);
      height: 1.6rem;
      position: absolute;
      top: -2.1rem;
      padding-top: 2px !important;
      vertical-align: middle;
      border-color: lightslategray;
      border-top-width: 1px;
      border-right-width: 1px;
      border-left-width: 1px;
      border-bottom-width: 0px;
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
      /* box-shadow: 0px 0px 50px lightslategray; */
      /* padding-bottom: 0px;
      margin-top: 0px;
      margin-bottom: 0px; */
      /* font-size: 0.8rem; */
    }

    #collapse-button-elevation,
    #collapse-button-layer-control{      
      color: rgb(58, 109, 151);
      height: 1.6rem;
      padding-top: 0px !important;
      /* this is so that the buttons lay on top of the other elements in the layer control (mainly the elevation control) */
      z-Index: 801;
      /* padding-top: 2px !important;
      font-size: 0.8rem; */
    }

    /* ▼ */
    #collapse-button-video.btn.p-2::after, 
    #collapse-button-elevation.btn.p-2::after,
    #collapse-button-layer-control.btn.p-2::after{
      content: "Hide";
    }

    #collapse-button-video.btn.p-2.collapsed::after, 
    #collapse-button-elevation.btn.p-2.collapsed::after,
    #collapse-button-layer-control.btn.p-2.collapsed::after{
      content: "Show";
    }


    /* #layer-control-parent-div{
      background-color: white;
    } */


  #layer-control-div{
    margin:0px;
    padding:0px;
    border:0px;
    background: none;
    box-shadow: none;
  }

  /* .leaflet-right {
    display:flex;
    float:none;
  } */
  /* .leaflet-right {
    display:inline-block;
    float:none;
  } */
  
  
  /* .leaflet-right .leaflet-control-layers.leaflet-control{
    display:inline-block;

  } */
  
  /* .leaflet-right .leaflet-control-zoom { */
  /* .leaflet-right { */
    /* display:flex; */
    /* float:none; */
  /* } */

  </style>



</head>

<body>

  <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
  <!-- <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">   -->
    <a class="navbar-brand" href="index.html">BikeLapse</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="nav navbar-nav ml-auto">
        <li class="nav-item active">
          <a class="nav-link" href="#">Map <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="create-ride.html">Create Ride</a>
        </li>
      </ul>
    </div>
  </nav>



  <!-- ########### MAP ############ -->
  <!-- The div where we will inject our map -->
  <div id="map">
    <!-- you <em>should</em> see a map here...<br>
    if you don't, try reloading the page.<br>
    if that doesn't work, try opening the console on your browser to find the error and fix it! -->
  </div>






  <!-- ########### LAYER CONTROL - TURN LAYERS ON OFF WITH CHECK BOXES ############ -->
  <!--  Similar to what we're doing with our YouTube component, 
        we are doing the same thing with the layer control div here 
        we define the container div, and then append the Layer Control
        to it once we create it in the JS code -->  
  <div id="layer-control-display-div" style="min-width:150px;">

    <div class="d-flex flex-row-reverse" style="position :relative; height:0px" >
      <button id="collapse-button-layer-control" class="btn p-2" data-toggle="collapse" data-target="#layer-control-div"></button><br>
    </div>
    <div class="layer-control-display-title">
      <h5>All Rides</h5>
    </div>    
    <!-- <div id="layer-control-div" class="collapse show">
      when we create our layer control (L.Control.Layers) it will generate this child element
    </div> -->

  </div>
  



  <!-- ########### RIDE INFO CONTAINER - TOTAL RIDE STATS ############ -->
  <div id="ride-info-parent" class="p-3" >

    <!-- Ride Info TITLE ROW -->
    <div>
      <h3 id="ride-name" class="title-text">Ride Name Will Appear Here</h3>
      <div class="d-flex mr-2">
        <div id="ride-start-datetime" class="mr-auto timestamp">
          ride date/time will appear here
        </div>        
        <a id="ride-strava-url" class="ml-3 timestamp" href="" target="_blank" hidden>Strava</a>
        <a id="ride-googlemap-url" class="ml-3 timestamp" href="" target="_blank" hidden>Google Map</a>
      </div>



    </div>


    <!-- Ride Info STATS ROW -->
    <!-- <div class="d-flex flex-wrap justify-content-between mt-3"> -->
    <!-- <div class="row mt-2 mb-1 mr-1"></div> -->
    <div class="row mt-2 mr-1">
      <div class="col-6 col-sm-3">
        <div id="duration-moving-tot" class="stat-tot">
          <div class="stat-subtext">Ride Time:</div> 
          <div class="stat-tot-text">00h 00m</div>
        </div>
      </div>      
      <div class="col-6 col-sm-3">
        <div id="distance-tot" class="stat-tot">
          <div class="stat-subtext">Ride Distance:</div> 
          <div class="stat-tot-text">00.00 mi</div>                    
        </div>
      </div>
      <div class="col-6 mt-3 col-sm-3 mt-sm-0">
        <div id="elevation-tot" class="stat-tot">
          <div class="stat-subtext">Elev Gain:</div> 
          <div class="stat-tot-text">0000 ft</div>
        </div>
      </div>      
      <div class="col-6 mt-3 col-sm-3 mt-sm-0 ">
        <div id="speed-moving-avg" class="stat-tot">
          <div class="stat-subtext">Avg Speed:</div> 
          <div class="stat-tot-text">00.00 mph</div>
        </div>
      </div>      
    </div>
  </div>
<!-- </div> -->




  <!-- ########### YOUTUBE VIDEO PLAYER - PLAYBACK CONTROLS - RIDE STATS DISPLAY ############ -->
  <!-- The YouTube API requires that we place an empty div with id="player" on the page.
      When the YouTube API is first initialized, it will steal this "player" div, and
      transform it into an iFrame with a video player inside it that we can control with the API.
      BUT....in order to hide/unhide the iFrame that the YouTube API creates 
      (as well as style it) AND add our own transport controls and collapse (show/hide) button...
      we need to wrap "player" and all our controls in this "player-parent" div 
      and reference the "player-parent" in our logic whenever we want to completely
      hide/unhide the entire component -->
  <div id="player-parent" hidden>
    <div class="d-flex flex-row-reverse" style="position :relative; height:0px;" >
      <button id="collapse-button-video" class="btn p-2" data-toggle="collapse" data-target="#player"></button><br>
    </div>
    <div class="d-flex justify-content-center mb-2">
      <div id="player" class="collapse show">
        video iFrame will replace this div
      </div>
    </div>    
    <div id="transport-controls" class="transport-controls d-flex align-items-center">
      <button id="play-pause" class="play play-pause-button"></button>
      <!-- uncomment this line if you want a stop button  --> 
      <!-- <button id="stop">▇</button>   -->
      <input type="range" min="0" max="100" value="0" id="slider" class="slider ml-2 mr-2 flex-fill" >
      <button id="playback-rate">1x</button>
    </div>

    <!-- CUMULATIVE Ride Stats STATS ROW / COLLAPSIBLE PANEL -->
    <!-- <div id="ride-stats-cumulative"  class="collapse show"> -->
    <!-- <div class="d-flex justify-content-between mt-3"> -->
    <div id="ride-stats-cumulative" class="row mt-2 mb-1 mr-1 collapse">
      <div class="col-3">
        <div id="duration-moving-cum" class="stat-cum">
          <div class="stat-subtext">Elapsed Time:</div> 
          <div class="stat-cum-text">0h 0m</div>
        </div>
      </div>
      <div class="col-3">
        <div id="distance-cum" class="stat-cum">
          <div class="stat-subtext">Distance:</div> 
          <div class="stat-cum-text">0.00 mi</div>
        </div>
      </div>
      <div class="col-3">
        <div id="elevation-cum" class="stat-cum">
          <div class="stat-subtext">Elevation:</div> 
          <div class="stat-cum-text">0 ft</div>
        </div>
      </div>
      <div class="col-3">
        <div id="speed-moving-now" class="stat-cum">
          <div class="stat-subtext">Speed:</div> 
          <div class="stat-cum-text">0.00 mph</div>
        </div>
      </div>
      <!-- </div>     -->
    </div>    
  </div>    



  <!-- ########### ELEVATION DISPLAY ############ -->
  <!--  Similar to what we're doing with our YouTube component, 
        we are doing the same thing with the elevation div here 
        we define the container div, and then append the elevation Control
        to it once we create it in the JS code. then we can hide/unhide the whole thing -->  
  <div id="elevation-display-div" hidden>
    <div class="d-flex flex-row-reverse" style="position :relative; height:0px" >
      <button id="collapse-button-elevation" class="btn p-2" data-toggle="collapse" data-target="#elevation-control-div"></button><br>
    </div>
    <div class="elevation-control-title">
      <h5>Elevation</h5>
    </div>
    <!-- <div id="elevation-control-div" class="collapse show">
      when we create our elevation control it will generate this child element
    </div> -->
  </div>







<!-- JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT -->  
<!-- JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT -->
<!-- JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT -->

  <!--D3 cdn-->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.5.0/d3.min.js"></script> -->
  <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.5.0/d3.js"></script> -->
  <script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script>

  <!-- jQuery, Popper.js, and Bootstrap.js - FOR BOOTSTRAP 4 -->
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.slim.min.js" 
  integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" 
  crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" 
  integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" 
  crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" 
  integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" 
  crossorigin="anonymous"></script>


  
  <!-- ########### OTHER PEOPLE'S LIBRARIES I'M USING ############ -->
  <script type="text/javascript" src="js/lib/moment.min.js"></script>
  <script type="text/javascript" src="js/lib/leaflet.elevation-0.0.4.min.js"></script>
  <!-- <script type="text/javascript" src="js/lib/leaflet.elevation-0.0.4.src.js"></script> -->


  
  <!-- ########### MY JAVASCRIPT ############ -->
  <!-- API key -->
  <script type="text/javascript" src="js/config/mapbox_api_key.js"></script>
  <!-- <script type="text/javascript" src="js/config/mapbox_api_key_test.js"></script> -->

  <!-- Beginnings of my own library -->
  <script type="text/javascript" src='js/lib/geojson-tools.js'></script>

  <!-- Our JS -->
  <script type="text/javascript" src="js/global-settings.js"></script>
  <script type="text/javascript" src="js/youtube-logic.js"></script>
  <script type="text/javascript" src="js/leaflet-functions.js"></script>
  <script type="text/javascript" src="js/map-initialization-logic.js"></script>
  <script type="text/javascript" src="js/common-display-update-logic.js"></script>
  
  <!-- specific JS functionality for the index.html page -->
  <script type="text/javascript" src="js/config/all_ride_file_names.js"></script>
  <script type="text/javascript" src="js/index-main.js"></script>


<!-- JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT -->  
<!-- JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT -->
<!-- JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT JAVASCRIPT -->
</body>
</html>